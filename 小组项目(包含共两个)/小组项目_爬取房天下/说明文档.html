<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600986 (zh-CN, DDL); Windows/10.0.0 (Win64); EDAMVersion=V2;"/>
  <meta name="content-class" content="yinxiang.markdown"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="533"/>

<div><span><div style="font-size: 14px; margin: 0; padding: 0; width: 100%;"><h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">1.思路</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><img src="说明文档_files/Image.png" type="image/png" data-filename="Image.png"/></p>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">2.实施</h4>
<pre style="line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; margin: 2px 0 8px; background-color: #f5f7f8;"><code style="display: block; overflow-x: auto; background: #1e1e1e; line-height: 160%; box-sizing: content-box; border: 0; border-radius: 0; letter-spacing: -.3px; padding: 18px; color: #f4f4f4; white-space: pre-wrap;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> requests
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">from</span> bs4 <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> BeautifulSoup
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">import</span> csv<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#将数据存入csv文件</span>

<span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;"><span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">def</span> <span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">pachong</span><span style="color: #dcdcdc; line-height: 160%; box-sizing: content-box;">(inputurl)</span>:</span>
    req=requests.get(url=inputurl)<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#抓取页面</span>
    req.encoding=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'gb2312'</span>
    html=req.text
    bf=BeautifulSoup(html,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;lxml&quot;</span>)
    url=bf.find_all(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'div'</span>,class_=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'page'</span>)   
    div=bf.find_all(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'div'</span>,class_=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'nl_con clearfix'</span>)<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#楼盘信息</span>
    
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#print(type(div[0]))</span>
    x=BeautifulSoup(str(div[<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">0</span>]),<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;lxml&quot;</span>)
    
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">try</span>:
        h=x.find_all(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'div'</span>,class_=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'kanesf'</span>)<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#特殊情况，新房已售出</span>
        h[<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">0</span>][<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'class'</span>]=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'nhouse_price'</span><span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#将属性换掉</span>
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">except</span>:
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">pass</span>
    y=x.find_all(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'div'</span>,class_=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'nhouse_price'</span>)<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#楼盘价格</span>
    a=x.find_all(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'div'</span>,class_=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'address'</span>)<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#楼盘地址</span>
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#print(type(y[0]))</span>
    b=BeautifulSoup(str(a),<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;lxml&quot;</span>)
    c=b.find_all(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'a'</span>)
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#print(y[1].label.string)#存在有价格待定的格式</span>
    
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">try</span>:
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">for</span> i <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">in</span> range(<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">20</span>):<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#一个页面差不多有20个房价信息，排除最后一页</span>
            z=y[i].get_text()
            <span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'''if y[i].span:
                e=y[i].span.string
            else:
                e=y[i].label.string+y[i].i.string'''</span>
            
            <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">if</span> y[i].em:
                <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#if str(y[i].em.string)[-2:]=='�O' or str(y[i].em.string)[-3:-1]=='�O':</span>
                <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">if</span> z[<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">-3</span>:<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">-1</span>]==<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'�O'</span> <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">or</span> z[<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">-4</span>:<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">-2</span>]==<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'�O'</span>:<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#替换掉乱码情况</span>
                    z=z.replace(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'�O'</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'m^2'</span>)
                
            writer.writerow([str(c[i][<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'title'</span>]),z])<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#写入csv文件中</span>
            print(c[i][<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'title'</span>],z)
    
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#csvfile.close()</span>
    
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">except</span>:
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">pass</span>

target=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'https://newhouse.fang.com/house/s/?ctm=1.bj.xf_search.lpsearch_area.1'</span>
req=requests.get(url=target)
req.encoding=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'gb2312'</span>
furl=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'https://newhouse.fang.com'</span><span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#url前缀</span>
html=req.text

bf=BeautifulSoup(html,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;lxml&quot;</span>)
li=bf.find_all(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'li'</span>,class_=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'quyu_name dingwei'</span>)
lin=BeautifulSoup(str(li),<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;lxml&quot;</span>)
link=lin.find_all(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'a'</span>)
location=[<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'朝阳'</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'海淀'</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'丰台'</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'西城'</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'东城'</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'昌平'</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'大兴'</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'通州'</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'房山'</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'顺义'</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'石景山'</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'密云'</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'门头沟'</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'怀柔'</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'延庆'</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'平谷'</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'燕郊'</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'北京周边'</span>]<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#手动总结这几个区，把它们的名字放在一个列表里面。</span>
<span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">for</span> i <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">in</span> range(<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>,<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">19</span>):
    csvfile=open(location[i<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">-1</span>]+<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'.csv'</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'a+'</span>,newline=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">''</span>,encoding=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'utf-8'</span>)<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#创建一个写入csv</span>
    writer=csv.writer(csvfile)
    writer.writerow([<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'具体位置'</span>,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'房价'</span>])
    links=furl+link[i][<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'href'</span>]
    pachong(links)<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#爬取该网页第一页的信息</span>
    req=requests.get(url=links)
    req.encoding=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'gb2312'</span>
    html=req.text
    bf=BeautifulSoup(html,<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">&quot;lxml&quot;</span>)
    url=bf.find_all(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'div'</span>,class_=<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'page'</span>)
    <span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#print(url[0])</span>
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">try</span>:
        page=url[<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">0</span>].find_all(<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'a'</span>)
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">if</span> len(page)&gt;<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">0</span>:
            <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">for</span> i <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">in</span> page[<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">1</span>:<span style="color: #b8d7a3; line-height: 160%; box-sizing: content-box;">-2</span>]:<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#page[1:-2]是接下来要爬取的页面，因为房天下每个区的页面并不多，所以不需要跳转下一页，直接就能遍历每一页。</span>
                nurl=furl+i[<span style="color: #d69d85; line-height: 160%; box-sizing: content-box;">'href'</span>]<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#收集此地区跳转页面url</span>
                pachong(nurl)
    <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">except</span>:
        <span style="color: #569cd6; line-height: 160%; box-sizing: content-box;">pass</span>
    csvfile.close()<span style="color: #57a64a; font-style: italic; line-height: 160%; box-sizing: content-box;">#关闭csv</span>
</code></pre>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">项目分工</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">徐文静查资料，独立完成。</p>
</div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%23%23%23%23%201.%E6%80%9D%E8%B7%AF%0A!%5B26ee8f0dca922fed6339e9579c9a9f83.png%5D(en-resource%3A%2F%2Fdatabase%2F535%3A1)%0A%23%23%23%23%202.%E5%AE%9E%E6%96%BD%0A%60%60%60Python%0Aimport%20requests%0Afrom%20bs4%20import%20BeautifulSoup%0Aimport%20csv%23%E5%B0%86%E6%95%B0%E6%8D%AE%E5%AD%98%E5%85%A5csv%E6%96%87%E4%BB%B6%0A%0Adef%20pachong(inputurl)%3A%0A%20%20%20%20req%3Drequests.get(url%3Dinputurl)%23%E6%8A%93%E5%8F%96%E9%A1%B5%E9%9D%A2%0A%20%20%20%20req.encoding%3D'gb2312'%0A%20%20%20%20html%3Dreq.text%0A%20%20%20%20bf%3DBeautifulSoup(html%2C%22lxml%22)%0A%20%20%20%20url%3Dbf.find_all('div'%2Cclass_%3D'page')%20%20%20%0A%20%20%20%20div%3Dbf.find_all('div'%2Cclass_%3D'nl_con%20clearfix')%23%E6%A5%BC%E7%9B%98%E4%BF%A1%E6%81%AF%0A%20%20%20%20%0A%20%20%20%20%23print(type(div%5B0%5D))%0A%20%20%20%20x%3DBeautifulSoup(str(div%5B0%5D)%2C%22lxml%22)%0A%20%20%20%20%0A%20%20%20%20try%3A%0A%20%20%20%20%20%20%20%20h%3Dx.find_all('div'%2Cclass_%3D'kanesf')%23%E7%89%B9%E6%AE%8A%E6%83%85%E5%86%B5%EF%BC%8C%E6%96%B0%E6%88%BF%E5%B7%B2%E5%94%AE%E5%87%BA%0A%20%20%20%20%20%20%20%20h%5B0%5D%5B'class'%5D%3D'nhouse_price'%23%E5%B0%86%E5%B1%9E%E6%80%A7%E6%8D%A2%E6%8E%89%0A%20%20%20%20except%3A%0A%20%20%20%20%20%20%20%20pass%0A%20%20%20%20y%3Dx.find_all('div'%2Cclass_%3D'nhouse_price')%23%E6%A5%BC%E7%9B%98%E4%BB%B7%E6%A0%BC%0A%20%20%20%20a%3Dx.find_all('div'%2Cclass_%3D'address')%23%E6%A5%BC%E7%9B%98%E5%9C%B0%E5%9D%80%0A%20%20%20%20%23print(type(y%5B0%5D))%0A%20%20%20%20b%3DBeautifulSoup(str(a)%2C%22lxml%22)%0A%20%20%20%20c%3Db.find_all('a')%0A%20%20%20%20%23print(y%5B1%5D.label.string)%23%E5%AD%98%E5%9C%A8%E6%9C%89%E4%BB%B7%E6%A0%BC%E5%BE%85%E5%AE%9A%E7%9A%84%E6%A0%BC%E5%BC%8F%0A%20%20%20%20%0A%20%20%20%20try%3A%0A%20%20%20%20%20%20%20%20for%20i%20in%20range(20)%3A%23%E4%B8%80%E4%B8%AA%E9%A1%B5%E9%9D%A2%E5%B7%AE%E4%B8%8D%E5%A4%9A%E6%9C%8920%E4%B8%AA%E6%88%BF%E4%BB%B7%E4%BF%A1%E6%81%AF%EF%BC%8C%E6%8E%92%E9%99%A4%E6%9C%80%E5%90%8E%E4%B8%80%E9%A1%B5%0A%20%20%20%20%20%20%20%20%20%20%20%20z%3Dy%5Bi%5D.get_text()%0A%20%20%20%20%20%20%20%20%20%20%20%20'''if%20y%5Bi%5D.span%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e%3Dy%5Bi%5D.span.string%0A%20%20%20%20%20%20%20%20%20%20%20%20else%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20e%3Dy%5Bi%5D.label.string%2By%5Bi%5D.i.string'''%0A%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20if%20y%5Bi%5D.em%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%23if%20str(y%5Bi%5D.em.string)%5B-2%3A%5D%3D%3D'%EF%BF%BDO'%20or%20str(y%5Bi%5D.em.string)%5B-3%3A-1%5D%3D%3D'%EF%BF%BDO'%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20if%20z%5B-3%3A-1%5D%3D%3D'%EF%BF%BDO'%20or%20z%5B-4%3A-2%5D%3D%3D'%EF%BF%BDO'%3A%23%E6%9B%BF%E6%8D%A2%E6%8E%89%E4%B9%B1%E7%A0%81%E6%83%85%E5%86%B5%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20z%3Dz.replace('%EF%BF%BDO'%2C'm%5E2')%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%0A%20%20%20%20%20%20%20%20%20%20%20%20writer.writerow(%5Bstr(c%5Bi%5D%5B'title'%5D)%2Cz%5D)%23%E5%86%99%E5%85%A5csv%E6%96%87%E4%BB%B6%E4%B8%AD%0A%20%20%20%20%20%20%20%20%20%20%20%20print(c%5Bi%5D%5B'title'%5D%2Cz)%0A%20%20%20%20%0A%20%20%20%20%23csvfile.close()%0A%20%20%20%20%0A%20%20%20%20except%3A%0A%20%20%20%20%20%20%20%20pass%0A%0Atarget%3D'https%3A%2F%2Fnewhouse.fang.com%2Fhouse%2Fs%2F%3Fctm%3D1.bj.xf_search.lpsearch_area.1'%0Areq%3Drequests.get(url%3Dtarget)%0Areq.encoding%3D'gb2312'%0Afurl%3D'https%3A%2F%2Fnewhouse.fang.com'%23url%E5%89%8D%E7%BC%80%0Ahtml%3Dreq.text%0A%0Abf%3DBeautifulSoup(html%2C%22lxml%22)%0Ali%3Dbf.find_all('li'%2Cclass_%3D'quyu_name%20dingwei')%0Alin%3DBeautifulSoup(str(li)%2C%22lxml%22)%0Alink%3Dlin.find_all('a')%0Alocation%3D%5B'%E6%9C%9D%E9%98%B3'%2C'%E6%B5%B7%E6%B7%80'%2C'%E4%B8%B0%E5%8F%B0'%2C'%E8%A5%BF%E5%9F%8E'%2C'%E4%B8%9C%E5%9F%8E'%2C'%E6%98%8C%E5%B9%B3'%2C'%E5%A4%A7%E5%85%B4'%2C'%E9%80%9A%E5%B7%9E'%2C'%E6%88%BF%E5%B1%B1'%2C'%E9%A1%BA%E4%B9%89'%2C'%E7%9F%B3%E6%99%AF%E5%B1%B1'%2C'%E5%AF%86%E4%BA%91'%2C'%E9%97%A8%E5%A4%B4%E6%B2%9F'%2C'%E6%80%80%E6%9F%94'%2C'%E5%BB%B6%E5%BA%86'%2C'%E5%B9%B3%E8%B0%B7'%2C'%E7%87%95%E9%83%8A'%2C'%E5%8C%97%E4%BA%AC%E5%91%A8%E8%BE%B9'%5D%23%E6%89%8B%E5%8A%A8%E6%80%BB%E7%BB%93%E8%BF%99%E5%87%A0%E4%B8%AA%E5%8C%BA%EF%BC%8C%E6%8A%8A%E5%AE%83%E4%BB%AC%E7%9A%84%E5%90%8D%E5%AD%97%E6%94%BE%E5%9C%A8%E4%B8%80%E4%B8%AA%E5%88%97%E8%A1%A8%E9%87%8C%E9%9D%A2%E3%80%82%0Afor%20i%20in%20range(1%2C19)%3A%0A%20%20%20%20csvfile%3Dopen(location%5Bi-1%5D%2B'.csv'%2C'a%2B'%2Cnewline%3D''%2Cencoding%3D'utf-8')%23%E5%88%9B%E5%BB%BA%E4%B8%80%E4%B8%AA%E5%86%99%E5%85%A5csv%0A%20%20%20%20writer%3Dcsv.writer(csvfile)%0A%20%20%20%20writer.writerow(%5B'%E5%85%B7%E4%BD%93%E4%BD%8D%E7%BD%AE'%2C'%E6%88%BF%E4%BB%B7'%5D)%0A%20%20%20%20links%3Dfurl%2Blink%5Bi%5D%5B'href'%5D%0A%20%20%20%20pachong(links)%23%E7%88%AC%E5%8F%96%E8%AF%A5%E7%BD%91%E9%A1%B5%E7%AC%AC%E4%B8%80%E9%A1%B5%E7%9A%84%E4%BF%A1%E6%81%AF%0A%20%20%20%20req%3Drequests.get(url%3Dlinks)%0A%20%20%20%20req.encoding%3D'gb2312'%0A%20%20%20%20html%3Dreq.text%0A%20%20%20%20bf%3DBeautifulSoup(html%2C%22lxml%22)%0A%20%20%20%20url%3Dbf.find_all('div'%2Cclass_%3D'page')%0A%20%20%20%20%23print(url%5B0%5D)%0A%20%20%20%20try%3A%0A%20%20%20%20%20%20%20%20page%3Durl%5B0%5D.find_all('a')%0A%20%20%20%20%20%20%20%20if%20len(page)%3E0%3A%0A%20%20%20%20%20%20%20%20%20%20%20%20for%20i%20in%20page%5B1%3A-2%5D%3A%23page%5B1%3A-2%5D%E6%98%AF%E6%8E%A5%E4%B8%8B%E6%9D%A5%E8%A6%81%E7%88%AC%E5%8F%96%E7%9A%84%E9%A1%B5%E9%9D%A2%EF%BC%8C%E5%9B%A0%E4%B8%BA%E6%88%BF%E5%A4%A9%E4%B8%8B%E6%AF%8F%E4%B8%AA%E5%8C%BA%E7%9A%84%E9%A1%B5%E9%9D%A2%E5%B9%B6%E4%B8%8D%E5%A4%9A%EF%BC%8C%E6%89%80%E4%BB%A5%E4%B8%8D%E9%9C%80%E8%A6%81%E8%B7%B3%E8%BD%AC%E4%B8%8B%E4%B8%80%E9%A1%B5%EF%BC%8C%E7%9B%B4%E6%8E%A5%E5%B0%B1%E8%83%BD%E9%81%8D%E5%8E%86%E6%AF%8F%E4%B8%80%E9%A1%B5%E3%80%82%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20nurl%3Dfurl%2Bi%5B'href'%5D%23%E6%94%B6%E9%9B%86%E6%AD%A4%E5%9C%B0%E5%8C%BA%E8%B7%B3%E8%BD%AC%E9%A1%B5%E9%9D%A2url%0A%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20%20pachong(nurl)%0A%20%20%20%20except%3A%0A%20%20%20%20%20%20%20%20pass%0A%20%20%20%20csvfile.close()%23%E5%85%B3%E9%97%ADcsv%0A%20%20%20%60%60%60%0A%20%20%20%23%23%23%23%20%E9%A1%B9%E7%9B%AE%E5%88%86%E5%B7%A5%0A%20%20%20%E5%BE%90%E6%96%87%E9%9D%99%E6%9F%A5%E8%B5%84%E6%96%99%EF%BC%8C%E7%8B%AC%E7%AB%8B%E5%AE%8C%E6%88%90%E3%80%82</center></span>
</div></body></html> 